<h1 class="text-2xl font-bold text-foreground mt-8 mb-4 first:mt-0 border-b-2 border-border pb-2">크롤링 기반 분산형 무중단 데이터 수집 봇</h1>
<h2 class="text-xl font-bold text-foreground mt-6 mb-3 border-b border-border pb-1">1. 핵심 기능 요약</h2>
<ul class="list-disc list-outside text-foreground-secondary mb-4 space-y-1 pl-6">
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">무중단 무한 탐색</strong>: 시작 지점(Seed)을 기반으로 연관 데이터를 끊임없이 추적하며 신규 데이터를 탐색 및 수집 Seed 소진 시 Seed 재수집.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">유연한 확장성</strong>: 새로운 수집 방식, 데이터 소스 추가가 용이한 구조.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">분산 시스템을 통한 효율 극대화</strong>: 여러 수집 인스턴스가 DB를 통해 Seed 공유, 중복 수집을 방지. Scale-out이 가능한 효율적인 분산 처리 시스템 구축.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">자동화된 운영 관리</strong>: 스크립트 기반으로 프로젝트에 최적화된 배포, 설정 변경, 확장 및 재시작 등 전체 운영 과정 자동화.</li>
</ul>
<hr />
<h2 class="text-xl font-bold text-foreground mt-6 mb-3 border-b border-border pb-1">2. 시스템 아키텍처 및 동작 방식</h2>
<h3 class="text-lg font-semibold text-foreground mt-4 mb-2">2.1. 전체 워크플로우</h3>
<p class="text-foreground-secondary leading-relaxed mb-4">'Seed 수집'과 '무한 탐색' 단계를 반복.<br />
초기 Seed 목록 확보 후, 각 seed을 기반으로 새로운 데이터가 수집되지 않는 상황까지 반복.<br />
모든 Seed 소진 시 새로운 Seed를 수집하며 과정 반복.</p>
<p class="text-foreground-secondary leading-relaxed mb-4"><img src="/assets/noteImages/crawling-bot-flow.png" alt="봇 플로우" class="rounded-lg shadow-lg max-w-full h-auto mx-auto block my-6" /></p>
<h3 class="text-lg font-semibold text-foreground mt-4 mb-2">2.2. 분산 처리 구조 (DB vs. Message Queue)</h3>
<p class="text-foreground-secondary leading-relaxed mb-4">효율적인 협업을 위한 공유 자원 관리 방식 필요.</p>
<ul class="list-disc list-outside text-foreground-secondary mb-4 space-y-1 pl-6">
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">Message Queue</strong>: 도입이 간단하고 사용도 편했지만, 동작 방식 특성상 운영에 적합하지 않는 등, MQ에 적합하지 않은 구조라고 판단.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">MongoDB</strong>: <strong class="font-bold text-foreground">원자적 연산</strong> 과 상태 관리 필드를 활용해 Message Queue보다 프로젝트에 더 적합한 형태로 사용 가능. 하나의 컬렉션 내에서 Document 단위로 Seed 그룹을 관리하여, 봇 옵션에 따라 유연하게 공유 자원을 추가/삭제할 수 있어 최종 채택.</li>
</ul>
<hr />
<h2 class="text-xl font-bold text-foreground mt-6 mb-3 border-b border-border pb-1">3. 구현 상세</h2>
<h3 class="text-lg font-semibold text-foreground mt-4 mb-2">3.1. Seed 상태 관리</h3>
<p class="text-foreground-secondary leading-relaxed mb-4">분산 환경에서 Seed 소진 시, 여러 봇이 동일한 Seed를 동시 재수집하는 것을 막기 위해 DB의 특정 필드를 Lock으로 활용하여 Race Condition 제어.</p>
<ul class="list-disc list-outside text-foreground-secondary mb-4 space-y-1 pl-6">
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">핵심 원리</strong>: 한 시점에 <strong class="font-bold text-foreground">오직 하나의 봇</strong>만이 Seed 리스트를 갱신할 수 있도록 원자적 연산을 통해 Lock을 획득하는 메커니즘 구현.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">동작</strong>: Seed를 재수집 시, Document 상태를 확인하고 Lock 필드를 선점해야만 업데이트 권한 획득. 실패 시 다른 봇이 작업을 마칠 때까지 대기.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">예외 처리</strong>: 특정 시간 이상 Lock이 해제되지 않으면 문제 발생으로 간주. 다른 봇이 Lock을 강제로 해제하고 작업을 이어받는 안전장치 마련.</li>
</ul>
<h3 class="text-lg font-semibold text-foreground mt-4 mb-2">3.2. 확장성을 고려한 설계</h3>
<p class="text-foreground-secondary leading-relaxed mb-4">새로운 탐색 모드를 쉽게 추가할 수 있도록 확장성을 고려하여 설계.<br />
공통 기능을 정의한 베이스 클래스를 상속하고, 각 탐색 모드에 필요한 핵심 로직만 메소드 오버라이딩을 통해 구현하면 새로운 기능 추가 가능.</p>
<hr />
<h2 class="text-xl font-bold text-foreground mt-6 mb-3 border-b border-border pb-1">4. 관리 자동화 스크립트</h2>
<p class="text-foreground-secondary leading-relaxed mb-4">봇의 배포와 관리를 자동화하는 자체 관리 스크립트 구현.<br />
표준화된 템플릿 기반으로 프로젝트에 맞게 확장되어, 템플릿 업데이트와 호환성을 유지하도록 설계.</p>
<ul class="list-disc list-outside text-foreground-secondary mb-4 space-y-1 pl-6">
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">배포 및 설정</strong>: 스크립트를 통해 각 봇의 동작에 필요한 환경 변수 주입.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">상태 조회 및 제어</strong>: 현재 배포된 모든 봇의 설정을 조회하고, 필요에 따라 특정 봇의 Replica 수를 동적으로 조절하거나 재시작.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">일괄 업데이트</strong>: 템플릿 변경 사항을 실행 중인 모든 봇에 일괄 적용하여 유지보수 효율 증대.</li>
</ul>
<hr />
<h2 class="text-xl font-bold text-foreground mt-6 mb-3 border-b border-border pb-1">5. 모니터링 및 통계</h2>
<ul class="list-disc list-outside text-foreground-secondary mb-4 space-y-1 pl-6">
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">일일 통계 집계</strong>: 동작 시 수집되는 각 봇의 통계를 매일 기록하여 DB에 저장.</li>
<li class="text-foreground-secondary"><strong class="font-bold text-foreground">Slack 알림</strong>: 매일 아침, 통계를 집계한 후 슬랙으로 전송하여 수집 현황을 손쉽게 모니터링.</li>
</ul>